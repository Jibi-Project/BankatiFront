<app-topnav (toggleSidebarForMe)="sidenav.toggle()"></app-topnav>

<mat-sidenav-container class="sidenav-container">
  <!-- Sidebar -->
  <mat-sidenav #sidenav mode="side" opened>
    <app-leftnav></app-leftnav>
  </mat-sidenav>
  <br/>

<mat-card class="change-password-card">
  <!-- Header Section -->
  <div class="card-header">
    <mat-icon class="profile-icon" aria-hidden="false">lock</mat-icon>
    <h2>Changer le mot de passe</h2>
  </div>
  <hr />

  <!-- Change Password Form -->
  <mat-card-content>
    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
      <h3 class="section-title">Informations de sécurité</h3>

      <!-- Old Password -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Mot de passe actuel</mat-label>
        <input matInput type="password" formControlName="oldPassword" />
        <mat-error *ngIf="changePasswordForm.controls['oldPassword'].invalid && changePasswordForm.controls['oldPassword'].touched">
          Le mot de passe actuel est requis.
        </mat-error>
      </mat-form-field>

      <!-- New Password -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Nouveau mot de passe</mat-label>
        <input matInput type="password" formControlName="newPassword" />
        <mat-error *ngIf="changePasswordForm.controls['newPassword'].invalid && changePasswordForm.controls['newPassword'].touched">
          Le nouveau mot de passe doit comporter au moins 6 caractères.
        </mat-error>
      </mat-form-field>

      <!-- Submit Button -->
      <div class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="changePasswordForm.invalid">
          Changer le mot de passe
        </button>
      </div>
    </form>
  </mat-card-content>

  <!-- Success/Error Messages -->
  <mat-card-footer>
    <div *ngIf="successMessage" class="success">{{ successMessage }}</div>
    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
  </mat-card-footer>
</mat-card>

</mat-sidenav-container>
